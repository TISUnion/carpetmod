--- a/net/minecraft/block/BlockCommandBlock.java
+++ b/net/minecraft/block/BlockCommandBlock.java
@@ -1,6 +1,9 @@
 package net.minecraft.block;
 
 import java.util.Random;
+
+import carpet.logging.commandblock.CommandBlockLogger;
+import carpet.settings.CarpetSettings;
 import net.minecraft.block.state.IBlockState;
 import net.minecraft.entity.EntityLivingBase;
 import net.minecraft.entity.player.EntityPlayer;
@@ -14,17 +17,9 @@
 import net.minecraft.tileentity.CommandBlockBaseLogic;
 import net.minecraft.tileentity.TileEntity;
 import net.minecraft.tileentity.TileEntityCommandBlock;
-import net.minecraft.util.EnumBlockRenderType;
-import net.minecraft.util.EnumFacing;
-import net.minecraft.util.EnumHand;
-import net.minecraft.util.Mirror;
-import net.minecraft.util.Rotation;
-import net.minecraft.util.StringUtils;
+import net.minecraft.util.*;
 import net.minecraft.util.math.BlockPos;
-import net.minecraft.world.GameRules;
-import net.minecraft.world.IBlockReader;
-import net.minecraft.world.IWorldReaderBase;
-import net.minecraft.world.World;
+import net.minecraft.world.*;
 import org.apache.logging.log4j.LogManager;
 import org.apache.logging.log4j.Logger;
 
@@ -65,7 +60,29 @@
                     if (flag)
                     {
                         tileentitycommandblock.setConditionMet();
-                        worldIn.getPendingBlockTicks().scheduleTick(pos, this, this.tickRate(worldIn));
+
+                        // TISCM instantCommandBlock
+//                        worldIn.getPendingBlockTicks().scheduleTick(pos, this, this.tickRate(worldIn));
+                        boolean doVanillaLogic = true;
+                        if (CarpetSettings.instantCommandBlock && tileentitycommandblock.getMode() == TileEntityCommandBlock.Mode.REDSTONE)
+                        {
+                            Block blockBelow = worldIn.getBlockState(pos.down()).getBlock();
+                            if (blockBelow == Blocks.REDSTONE_ORE)
+                            {
+                                this.tick(state, worldIn, pos, worldIn.getRandom());
+                                doVanillaLogic = false;
+                            } else if (CarpetSettings.asyncCommandBlock && blockBelow == Blocks.PURPUR_BLOCK) {
+                                HttpUtil.DOWNLOADER_EXECUTOR.submit(() -> {
+                                    this.tick(state, worldIn, pos, worldIn.getRandom());
+                                });
+                                doVanillaLogic = false;
+                            }
+                        }
+                        if (doVanillaLogic)
+                        {
+                            // vanilla thing
+                            worldIn.getPendingBlockTicks().scheduleTick(pos, this, this.tickRate(worldIn));
+                        }
                     }
                 }
             }
@@ -126,6 +143,7 @@
         if (p_193387_5_)
         {
             p_193387_4_.trigger(p_193387_2_);
+            CommandBlockLogger.getInstance().onCommandBlockActivated(p_193387_2_, p_193387_3_, p_193387_1_, p_193387_4_);  // TISCM commandblock logger
         }
         else
         {
